{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "$id": "...",
  "title": "Incoming HTTP Request Event",
  "description": "A structured event describing the current state of a resource, such as CPU, memory, disk usage, etc.",
  "type": "object",
  "required": ["method"],
  "properties": {
    "cpu": {
      "type": "object",
      "description": "A sample of the current server processor usage.",
      "required": ["load_avg_1m"],
      "additionalProperties": false,
      "properties": {
        "load_avg_1m": {
          "type": "number",
          "description": "The load average for the processor in the last 1 minute. This reflects the number of CPU tasks that are in the ready queue (i.e. waiting to be processed).",
          "minimum": 0
        },
        "load_avg_5m": {
          "type": "number",
          "description": "The load average for the processor in the last 5 minutes. This reflects the number of CPU tasks that are in the ready queue (i.e. waiting to be processed).",
          "minimum": 0
        },
        "load_avg_15m": {
          "type": "number",
          "description": "The load average for the processor in the last 10 minutes. This reflects the number of CPU tasks that are in the ready queue (i.e. waiting to be processed).",
          "minimum": 0
        }
      }
    },
    "cache": {
      "type": "object",
      "description": "A sample of cache statistics and state.",
      "minProperties": 1,
      "additionalProperties": false,
      "properties": {
        "active_connections": {
          "type": "integer",
          "description": "The number of active connections established with the database.",
          "minimum": 0
        },
        "index_cache_hit_rate": {
          "type": "number",
          "description": "The ratio of successful reads out of all read operations.",
          "minimum": 0
        },
        "evicted_keys": {
          "type": "integer",
          "description": "The number of evicted keys.",
          "minimum": 0
        }
      }
    },
    "database": {
      "type": "object",
      "description": "A sample of database statistics and state.",
      "minProperties": 1,
      "additionalProperties": false,
      "properties": {
        "db_size": {
          "type": "integer",
          "description": "The number of bytes contained in the database. This includes all table and index data on disk, including database bloat.",
          "minimum": 0
        },
        "tables": {
          "type": "integer",
          "description": "The number of tables in the database",
          "minimum": 0
        },
        "active_connections": {
          "type": "integer",
          "description": "The number of active connections established with the database.",
          "minimum": 0
        },
        "current_transaction": {
          "type": "string",
          "description": "The current transaction ID, which can be used to track writes over time.",
          "minLength": 1,
          "maxLength": 256
        },
        "index_cache_hit_rate": {
          "type": "number",
          "description": "Ratio of queries that used an index (instead of only sequential scans), rounded to five decimal points.",
          "minimum": 0
        },
        "table_cache_hit_rate": {
          "type": "number",
          "description": "Ratio of table lookups served from shared buffer cache, rounded to five decimal points.",
          "minimum": 0
        },
        "waiting_connections": {
          "type": "integer",
          "description": "Number of connections waiting on a lock to be acquired.",
          "minimum": 0
        }
      }
    },
    "disk": {
      "type": "object",
      "description": "A sample of a server's disk usage.",
      "required": ["read_iops", "write_iops"],
      "additionalProperties": false,
      "properties": {
        "read_iops": {
          "type": "integer",
          "description": "Number of read operations in I/O sizes of 16KB blocks.",
          "minimum": 0
        },
        "write_iops": {
          "type": "integer",
          "description": "Number of write operations in I/O sizes of 16KB blocks.",
          "minimum": 0
        }
      }
    },
    "memory": {
      "type": "object",
      "description": "A sample of a server's memory usage.",
      "required": ["total_mb"],
      "additionalProperties": false,
      "properties": {
        "cache_mb": {
          "type": "number",
          "description": "The portion of the memory used for disk cache.",
          "minimum": 0
        },
        "free_mb": {
          "type": "number",
          "description": "The amount of free memory availabe in megabytes.",
          "minimum": 0
        },
        "pgpgin": {
          "type": "number",
          "description": "The cumulative total of the pages read from disk. Sudden high variations on this number can indicate short duration spikes in swap usage. The other memory related metrics are point in time snapshots and can miss short spikes.",
          "minimum": 0
        },
        "pgpgout": {
          "type": "number",
          "description": "The cumulative total of the pages written to disk. Sudden high variations on this number can indicate short duration spikes in swap usage. The other memory related metrics are point in time snapshots and can miss short spikes.",
          "minimum": 0
        },
        "rss_mb": {
          "type": "number",
          "description": "The portion of the memory being used by the target application oin megabytes.",
          "minimum": 0
        },
        "swap_mb": {
          "type": "number",
          "description": "The portion of the memory stored on disk. Swap usually indicates a shortage of memory in megabytes.",
          "minimum": 0
        },
        "total_mb": {
          "type": "number",
          "description": "The sum of the rss, cache, and swap that equals the total memory being used in megabytes.",
          "minimum": 0
        }
      }
    }
  },
  "additionalProperties": false
}